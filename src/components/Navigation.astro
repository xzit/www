---
import { createReader } from "@keystatic/core/reader";
import keystaticConfig from "keystatic.config";
import { cn } from "@/lib/utils";
import { ModeToggle } from "./ModeToggle";
import { buttonVariants } from "@/components/ui/button";
import { RiGithubFill } from "@remixicon/react";

const reader = createReader(process.cwd(), keystaticConfig);
const settings = await reader.singletons.settings.read();
---

<div class="bg-background sticky top-0 z-50 border-b">
  <div class="mx-auto flex items-center justify-between">
    <div class="-mr-px w-full border-r sm:max-w-[240px]">
      <a
        href="/"
        class="hover:bg-foreground hover:text-background outline-foreground relative z-10 inline-flex h-16 w-full items-center justify-center p-4 transition-colors hover:outline-1 sm:px-6"
      >
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 64 14"
          fill="currentColor"
          class="max-w-[160px]"
        >
          <g transform="matrix(1.59776,0,0,1.66667,-19.4501,0.393639)">
            <path
              d="M19.805,5.56L19.805,6.208L21.749,8.164L24.221,8.164L24.221,5.692L22.769,5.692L21.221,4.144L19.805,5.56ZM12.173,-0.236L12.173,2.236L13.613,2.236L15.173,3.784L16.589,2.368L16.589,1.72L14.645,-0.236L12.173,-0.236ZM21.749,-0.236L18.785,2.74L16.577,2.74L13.613,5.692L12.173,5.692L12.173,8.164L14.645,8.164L17.597,5.2L19.805,5.2L22.769,2.236L24.221,2.236L24.221,-0.236L21.749,-0.236Z"
            ></path>
            <path
              d="M24.701,-0.236L24.701,2.236L34.277,2.236L31.061,5.452L34.553,5.452L36.749,3.256L36.749,-0.236L24.701,-0.236ZM26.897,2.476L24.701,4.672L24.701,8.164L36.749,8.164L36.749,5.692L27.173,5.692L30.389,2.476L26.897,2.476Z"
            ></path>
            <rect x="37.229" y="-0.236" width="2.472" height="8.4"></rect>
            <path
              d="M40.181,-0.236L40.181,2.236L44.465,2.236L44.969,2.728L44.969,8.164L47.441,8.164L47.441,1.708L45.497,-0.236L40.181,-0.236ZM46.565,-0.236L46.565,0.484L48.317,2.236L52.229,2.236L52.229,-0.236L46.565,-0.236Z"
            ></path>
          </g>
        </svg>
      </a>
    </div>
    <div class="flex items-center">
      <div class="border-x">
        <ModeToggle client:load />
      </div>
      <a
        href={settings?.github}
        target="_blank"
        rel="noopener noreferrer"
        class={cn(buttonVariants({ variant: "ghost", size: "icon" }), "p-8")}
      >
        <RiGithubFill className="size-6" />
      </a>
    </div>
  </div>
</div>
